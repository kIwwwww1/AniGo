# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

## Backend

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
cd backend
pip install redis==5.0.1 hiredis==2.3.2
```

–ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞:

```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
docker-compose up -d --build
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- ‚úÖ Redis –Ω–∞ –ø–æ—Ä—Ç—É 6379
- ‚úÖ Backend API –Ω–∞ –ø–æ—Ä—Ç—É 8000
- ‚úÖ PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 5440
- ‚úÖ Frontend –Ω–∞ –ø–æ—Ä—Ç—É 3000

### 3. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# macOS
brew install redis
brew services start redis

# Ubuntu
sudo apt install redis-server
sudo systemctl start redis-server
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª:
```env
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
```

–ò –∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
```bash
cd backend
python -m src.main
```

## Frontend

### –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –∫–æ–¥
Frontend –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ React.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### Backend Redis –∫—ç—à
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# 1. Redis —Ä–∞–±–æ—Ç–∞–µ—Ç
docker exec -it anigo-redis redis-cli ping
# –û—Ç–≤–µ—Ç: PONG ‚úÖ

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
docker-compose logs -f backend | grep Redis

# –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# ‚úÖ Redis connected: redis:6379
# üéØ Cache HIT: get_popular_anime (–ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫—ç—à)
# üí® Cache MISS: pagination_get_anime (–ø—Ä–æ–º–∞—Ö –∫—ç—à–∞)
```

### Frontend lazy loading
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –∫ –Ω–∏–º.

### React.memo
–û—Ç–∫—Ä–æ–π—Ç–µ React DevTools ‚Üí Profiler –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å.

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### Backend
Redis —Ä–∞–±–æ—Ç–∞–µ—Ç —Å graceful fallback - –µ—Å–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–∞–π—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –ø—Ä–æ—Å—Ç–æ –±–µ–∑ –∫—ç—à–∞.

–ß—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å Redis:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose stop redis

# Backend –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
```

### Frontend
–ó–∞–º–µ–Ω–∏—Ç–µ `<LazyImage>` –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –æ–±—ã—á–Ω—ã–π `<img>` —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `loading="lazy"`.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis –∫—ç—à–∞

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Redis CLI
docker exec -it anigo-redis redis-cli

# –í–Ω—É—Ç—Ä–∏ CLI:
DBSIZE              # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π –≤ –∫—ç—à–µ
INFO memory         # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
KEYS popular:*      # –í—Å–µ –∫–ª—é—á–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º "popular"
TTL <–∫–ª—é—á>          # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
FLUSHDB             # –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à
INFO stats          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π/–ø—Ä–æ–º–∞—Ö–æ–≤
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –≤—Ä—É—á–Ω—É—é

```bash
# –ß–µ—Ä–µ–∑ Docker
docker exec -it anigo-redis redis-cli FLUSHDB

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Redis
docker-compose restart redis
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose logs -f backend

# –¢–æ–ª—å–∫–æ Redis
docker-compose logs -f redis
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∫—ç—à–∞
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/backend/src/services/animes.py`:

```python
# –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ 10 –º–∏–Ω—É—Ç
@redis_cached(prefix="popular", ttl=600)
async def get_popular_anime(...):
    ...

# –£–º–µ–Ω—å—à–∏—Ç—å –¥–æ 30 —Å–µ–∫—É–Ω–¥
@redis_cached(prefix="anime_paginated", ttl=30)
async def pagination_get_anime(...):
    ...
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–∞–º—è—Ç–∏ Redis
–í `docker-compose.yml`:

```yaml
command: redis-server --appendonly yes --maxmemory 512mb --maxmemory-policy allkeys-lru
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
–í `.env` —Ñ–∞–π–ª–µ:

```env
REDIS_HOST=redis          # –¥–ª—è Docker: redis, –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ: localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=           # –¥–ª—è production —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ debounce delay
–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è debounce:

```javascript
// –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É —Å 300ms –Ω–∞ 500ms
const debouncedSearch = useDebounce(searchFunction, 500)
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Redis –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å Redis –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down
docker volume rm anigo_redis_data  # —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∞
docker-compose up -d redis
```

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Redis

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω: `docker ps | grep redis`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs redis`
4. Backend –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ Redis (fallback), –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

**–õ–æ–≥–∏ backend –ø–æ–∫–∞–∂—É—Ç:**
```
‚ö†Ô∏è Redis not available, will work without cache
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à
docker exec -it anigo-redis redis-cli FLUSHDB

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Redis
docker-compose restart redis
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ CORS –∏–ª–∏ 404.

### –ü—Ä–æ–±–ª–µ–º–∞: –ö—ç—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `redis` –∏ `hiredis` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@redis_cached()` –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç –±–æ–ª—å—à–µ, —á–µ–º —Ä–∞–Ω—å—à–µ
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ React DevTools Profiler
2. –ù–∞–π–¥–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —á–∞—Å—Ç—ã–º–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ useCallback –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- üìñ **[REDIS_SETUP.md](./REDIS_SETUP.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redis
- üöÄ **[REDIS_QUICKSTART.md](./REDIS_QUICKSTART.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- üìã **[REDIS_MIGRATION.md](./REDIS_MIGRATION.md)** - –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∫–æ–º–∞–Ω–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
