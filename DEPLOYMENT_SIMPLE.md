# –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É AniGo –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ Portainer

–û–¥–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –æ–¥–∏–Ω —Å–ø–æ—Å–æ–±, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º.

---

## –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Portainer

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **https://77-222-58-178.swtest.ru/**
2. –í–æ–π–¥–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—è:
   - **–õ–æ–≥–∏–Ω:** `admin`
   - **–ü–∞—Ä–æ–ª—å:** `QQPmWU&51B3L66Ue`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Docker environment (–æ–±—ã—á–Ω–æ `local`)

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –≤ Portainer - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker.**

---

## –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Git (–µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)

**–í–ê–ñ–ù–û:** GitHub –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–æ–ª–∏! –ù—É–∂–µ–Ω Personal Access Token.

**–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω: https://github.com/settings/tokens
2. –ù–∞–∂–º–∏—Ç–µ **Generate new token (classic)**
3. –û—Ç–º–µ—Ç—å—Ç–µ `repo` –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ VNC –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ SSH
cd /opt

# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/kIwwwww1/AniGo.git

# –ö–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç:
# Username: kIwwwww1
# Password: –í–°–¢–ê–í–¨–¢–ï –¢–û–ö–ï–ù (–Ω–µ –ø–∞—Ä–æ–ª—å!)
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. [GITHUB_CLONE.md](./GITHUB_CLONE.md)

### –í–∞—Ä–∏–∞–Ω—Ç B: –°–∫–∞—á–∞—Ç—å ZIP –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/kIwwwww1/AniGo
2. –ù–∞–∂–º–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É **Code** ‚Üí **Download ZIP**
3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–ø–æ–ª—É—á–∏—Ç—Å—è –ø–∞–ø–∫–∞ `AniGo`)
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ FileZilla/WinSCP:
   - –•–æ—Å—Ç: `77.222.58.178`
   - –ü–æ—Ä—Ç: `22`
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `SFTP`
   - –õ–æ–≥–∏–Ω: `root`
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `AniGo` –≤ `/opt/`

**–ò–ª–∏ —á–µ—Ä–µ–∑ SCP (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ):**
```bash
# Mac/Linux
scp -r /path/to/AniGo root@77.222.58.178:/opt/

# Windows PowerShell
scp -r C:\path\to\AniGo root@77.222.58.178:/opt/
```

**–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
cd /opt
mv AniGo anigo  # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º
cd anigo
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –°–¥–µ–ª–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏—á–Ω—ã–º –≤—Ä–µ–º–µ–Ω–Ω–æ

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏—á–Ω—ã–º:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/kIwwwww1/AniGo/settings
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ **Danger Zone**
3. –ù–∞–∂–º–∏—Ç–µ **Change visibility** ‚Üí **Make public**
4. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞:
```bash
git clone https://github.com/kIwwwww1/AniGo.git
```
5. –ü–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ Portainer

1. –í Portainer —Å–æ–∑–¥–∞–π—Ç–µ volume: `anigo-data`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é

---

## –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/anigo

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ls -la
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏: backend, frontend, nginx –∏ —Ç.–¥.

# –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ env.example –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º .env –Ω–∞–ø—Ä—è–º—É—é
nano .env
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª env.example –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤:

### –°–ø–æ—Å–æ–± 1: –°–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–±—ã—Å—Ç—Ä–æ)

```bash
# –°–∫–∞—á–∞–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è .env
curl -o create_env.sh https://raw.githubusercontent.com/kIwwwww1/AniGo/main/CREATE_ENV.sh
# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é (—Å–º. –Ω–∏–∂–µ)

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
bash create_env.sh

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª
nano .env
```

### –°–ø–æ—Å–æ–± 2: –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–¥–Ω—É –±–æ–ª—å—à—É—é –∫–æ–º–∞–Ω–¥—É (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—ë —Ü–µ–ª–∏–∫–æ–º):

```bash
cat > .env << 'ENVFILE'
# ============================================
# AniGo - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
# ============================================

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=anigo_user
POSTGRES_PASSWORD=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–ù–ê–î–ï–ñ–ù–´–ô_–ü–ê–†–û–õ–¨
POSTGRES_DB=anigo
DB_HOST=db
DB_PORT=5432

# Redis
REDIS_URL=redis://redis:6379/0

# JWT (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á: python3 -c "import secrets; print(secrets.token_urlsafe(32))")
SECRET_KEY=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ö–õ–Æ–ß_–ú–ò–ù–ò–ú–£–ú_32_–°–ò–ú–í–û–õ–ê
ALGORITHM=HS256
COOKIES_SESSION_ID_KEY=session_id

# SMTP (reg.ru)
SMTP_HOST=mail.hosting.reg.ru
SMTP_PORT=587
SMTP_USER=noreply@–≤–∞—à–¥–æ–º–µ–Ω.ru
SMTP_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_–ø–æ—á—Ç—ã_reg_ru
SMTP_FROM_EMAIL=noreply@–≤–∞—à–¥–æ–º–µ–Ω.ru

# URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
FRONTEND_URL=https://–≤–∞—à–¥–æ–º–µ–Ω.ru

# CORS
ALLOWED_ORIGINS=https://–≤–∞—à–¥–æ–º–µ–Ω.ru,https://www.–≤–∞—à–¥–æ–º–µ–Ω.ru

# –ü—É—Ç–∏
AVATARS_BASE_PATH=/app

# –û–∫—Ä—É–∂–µ–Ω–∏–µ
ENVIRONMENT=production
ENVFILE
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª:

```bash
nano .env
```

**–ó–∞–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª–µ .env:**

```env
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SECRET_KEY (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –Ω–∏–∂–µ

SECRET_KEY=–≤—Å—Ç–∞–≤—å—Ç–µ_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á_—Å—é–¥–∞
ENVIRONMENT=production
FRONTEND_URL=https://–≤–∞—à–¥–æ–º–µ–Ω.ru
ALLOWED_ORIGINS=https://–≤–∞—à–¥–æ–º–µ–Ω.ru,https://www.–≤–∞—à–¥–æ–º–µ–Ω.ru

POSTGRES_USER=anigo_user
POSTGRES_PASSWORD=–ü—Ä–∏–¥—É–º–∞–π—Ç–µ–ù–∞–¥–µ–∂–Ω—ã–π–ü–∞—Ä–æ–ª—å123!
POSTGRES_DB=anigo
DB_HOST=db
DB_PORT=5432

SMTP_HOST=mail.hosting.reg.ru
SMTP_PORT=587
SMTP_USER=noreply@–≤–∞—à–¥–æ–º–µ–Ω.ru
SMTP_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_–ø–æ—á—Ç—ã_reg_ru
SMTP_FROM_EMAIL=noreply@–≤–∞—à–¥–æ–º–µ–Ω.ru

AVATARS_BASE_PATH=/app
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:** `Ctrl+O`, `Enter`, `Ctrl+X`

---

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –µ—Å—Ç—å –≤ nginx:**

```bash
ls -la nginx/
```

### –í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª nginx.prod.conf

```bash
# –ö–æ–ø–∏—Ä—É–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp nginx/nginx.prod.conf nginx/nginx.conf

# –ó–∞–º–µ–Ω—è–µ–º –¥–æ–º–µ–Ω (–∑–∞–º–µ–Ω–∏—Ç–µ –≤–∞—à–¥–æ–º–µ–Ω.ru –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω)
sed -i 's/YOUR_DOMAIN/–≤–∞—à–¥–æ–º–µ–Ω.ru/g' nginx/nginx.conf

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–º–µ–Ω–∏–ª–æ—Å—å
grep "server_name" nginx/nginx.conf
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ nginx.prod.conf –Ω–µ—Ç

–°–æ–∑–¥–∞–π—Ç–µ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –°–æ–∑–¥–∞–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat > nginx/nginx.conf << 'NGINXCONF'
# Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx —Å SSL
# Rate limiting –∑–æ–Ω—ã
limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/m;
limit_req_zone $binary_remote_addr zone=api_burst:10m rate=10r/s;
limit_conn_zone $binary_remote_addr zone=conn_limit:10m;

# Upstream –¥–ª—è backend
upstream backend {
    least_conn;
    server backend:8000 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Upstream –¥–ª—è frontend
upstream frontend {
    server frontend:80;
}

# HTTP —Å–µ—Ä–≤–µ—Ä - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name yumivo.ru www.yumivo.ru;

    # –î–ª—è Let's Encrypt
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # –†–µ–¥–∏—Ä–µ–∫—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ HTTPS
    location / {
        return 301 https://$host$request_uri;
    }
}

# HTTPS —Å–µ—Ä–≤–µ—Ä
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name yumivo.ru www.yumivo.ru;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –ø–æ–∑–∂–µ)
    ssl_certificate /etc/letsencrypt/live/yumivo.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yumivo.ru/privkey.pem;

    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384';
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # –õ–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞
    client_max_body_size 50M;

    # –¢–∞–π–º–∞—É—Ç—ã
    proxy_connect_timeout 75s;
    proxy_send_timeout 300s;
    proxy_read_timeout 300s;

    # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    limit_conn conn_limit 20;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/json application/javascript;

    # API endpoints —Å rate limiting
    location /api/ {
        limit_req zone=api_limit burst=20 nodelay;
        limit_req zone=api_burst burst=5 nodelay;

        proxy_pass http://backend/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã frontend
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp)$ {
        proxy_pass http://frontend;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Frontend SPA
    location / {
        proxy_pass http://frontend;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Health check
    location /health {
        access_log off;
        proxy_pass http://backend/health;
    }
}
NGINXCONF
```

**–í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `–≤–∞—à–¥–æ–º–µ–Ω.ru` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã—à–µ (–≤ 3 –º–µ—Å—Ç–∞—Ö)!

**–ü—Ä–æ–≤–µ—Ä—è–µ–º:**
```bash
grep "server_name" nginx/nginx.conf
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `server_name –≤–∞—à–¥–æ–º–µ–Ω.ru www.–≤–∞—à–¥–æ–º–µ–Ω.ru;`

---

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –≤ reg.ru

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç [reg.ru](https://www.reg.ru) –∏ –≤–æ–π–¥–∏—Ç–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ú–æ–∏ –¥–æ–º–µ–Ω—ã** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
3. –ù–∞–π–¥–∏—Ç–µ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DNS-–∑–æ–Ω–æ–π**
4. –î–æ–±–∞–≤—å—Ç–µ –¥–≤–µ A-–∑–∞–ø–∏—Å–∏:

   **–ó–∞–ø–∏—Å—å 1:**
   - –¢–∏–ø: `A`
   - –ò–º—è: `@` (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)
   - –ó–Ω–∞—á–µ–Ω–∏–µ: `–í–ê–®_IP_–ê–î–†–ï–°` (IP –≤–∞—à–µ–≥–æ VPS)
   - TTL: `3600`

   **–ó–∞–ø–∏—Å—å 2:**
   - –¢–∏–ø: `A`
   - –ò–º—è: `www`
   - –ó–Ω–∞—á–µ–Ω–∏–µ: `–í–ê–®_IP_–ê–î–†–ï–°` (—Ç–æ—Ç –∂–µ IP)
   - TTL: `3600`

5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-30 –º–∏–Ω—É—Ç

---

## –®–∞–≥ 6: –û—Ç–∫—Ä–æ–π—Ç–µ Portainer (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã–ª–∏)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **https://77-222-58-178.swtest.ru/**
2. –í–æ–π–¥–∏—Ç–µ:
   - **–õ–æ–≥–∏–Ω:** `admin`
   - **–ü–∞—Ä–æ–ª—å:** `QQPmWU&51B3L66Ue`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Docker environment (–æ–±—ã—á–Ω–æ `local`)

---

## –®–∞–≥ 7: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ docker-compose (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:** Portainer –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ `/opt/anigo` –Ω–∞–ø—Ä—è–º—É—é.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ docker-compose —á–µ—Ä–µ–∑ SSH –Ω–∞–ø—Ä—è–º—É—é.

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH –∏–ª–∏ VNC –∫–æ–Ω—Å–æ–ª—å
cd /opt/anigo

# –ó–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ docker-compose
docker-compose -f docker-compose.prod.yml up -d --build

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ docker compose (–Ω–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
docker compose -f docker-compose.prod.yml up -d --build
```

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ —Å–æ–±–µ—Ä—É—Ç—Å—è –æ–±—Ä–∞–∑—ã.

**–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å:**
```bash
docker-compose -f docker-compose.prod.yml ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`.

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –°–æ–∑–¥–∞–π—Ç–µ Stack –≤ Portainer (–µ—Å–ª–∏ docker-compose –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. –í Portainer –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Stacks**
2. –ù–∞–∂–º–∏—Ç–µ **Add stack**
3. –ò–º—è: `anigo`
4. –í—ã–±–µ—Ä–∏—Ç–µ **Web editor**
5. **–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ volume

5. **–í–ê–ñ–ù–û:** Portainer –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ `/opt/anigo` –Ω–∞–ø—Ä—è–º—É—é. 

   **–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (–µ—Å–ª–∏ Portainer –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ)**
   
   –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `docker-compose.portainer.yml` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø—É—Ç–∏:
   - `/opt/anigo/backend` ‚Üí `./backend`
   - `/opt/anigo/frontend` ‚Üí `./frontend`
   - `/opt/anigo/nginx` ‚Üí `./nginx`
   - `/opt/anigo/.env` ‚Üí `./.env`
   
   –ù–æ —Ç–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π build context –≤ Portainer.

   **–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Volume (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
   
   –°–æ–∑–¥–∞–π—Ç–µ volume –≤ Portainer –∏ —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥.

   **–í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose —á–µ—Ä–µ–∑ SSH (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ)**
   
   –í–º–µ—Å—Ç–æ Portainer Stack, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ docker-compose –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ SSH (—Å–º. –Ω–∏–∂–µ)

6. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `docker-compose.portainer.yml` –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ

7. **–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –≤ Portainer –∑–∞–º–µ–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ:
   - `–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_–±–∞–∑—ã_–¥–∞–Ω–Ω—ã—Ö` ‚Üí –Ω–∞ –ø–∞—Ä–æ–ª—å –∏–∑ –≤–∞—à–µ–≥–æ `.env` —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∞ `POSTGRES_PASSWORD`)

8. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Portainer

8. **–í–ê–ñ–ù–û:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH –∏–ª–∏ VNC –∫–æ–Ω—Å–æ–ª—å
cd /opt/anigo
ls -la

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏:
# - backend/
# - frontend/
# - nginx/
# - .env
```

**–ï—Å–ª–∏ –ø–∞–ø–æ–∫ –Ω–µ—Ç:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ `/opt/anigo`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–∞–ø–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `anigo` (–Ω–µ `AniGo` —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã)
- –ï—Å–ª–∏ –ø–∞–ø–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `AniGo`, –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ: `mv /opt/AniGo /opt/anigo`

9. –ù–∞–∂–º–∏—Ç–µ **Deploy the stack**

10. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ —Å–æ–±–µ—Ä—É—Ç—Å—è –æ–±—Ä–∞–∑—ã

**–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É –ø—Ä–æ `.env` —Ñ–∞–π–ª:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `/opt/anigo/.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `ls -la /opt/anigo/.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ docker-compose.portainer.yml –∑–∞–º–µ–Ω–∏–ª–∏ `–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_–±–∞–∑—ã_–¥–∞–Ω–Ω—ã—Ö` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ (—Å–º. –®–∞–≥ 3)

---

## –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –ø–æ—Ä—Ç—ã

**–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É "address already in use" –Ω–∞ –ø–æ—Ä—Ç—É 80:**

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 80
sudo netstat -tulpn | grep :80
# –∏–ª–∏
sudo lsof -i :80

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Portainer (–µ—Å–ª–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80)
docker ps | grep portainer
# –ï—Å–ª–∏ Portainer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps -a

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 80
docker stop $(docker ps -q --filter "publish=80")
```

**–ï—Å–ª–∏ Portainer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80:**
- Portainer –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 9000, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ 80
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Portainer –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ

---

## –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firewall

–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ SSH —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
# –†–∞–∑—Ä–µ—à–∞–µ–º –ø–æ—Ä—Ç—ã
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∞–µ–º firewall
ufw enable

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
ufw status
```

---

## –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –∏ –ø–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

1. **DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   ```bash
   nslookup yumivo.ru
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¢–û–õ–¨–ö–û –≤–∞—à IP: 77.222.58.178
   ```

2. **–ï—Å–ª–∏ DNS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ IP –∞–¥—Ä–µ—Å–æ–≤:**
   - –£–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–∏–µ A-–∑–∞–ø–∏—Å–∏ –≤ reg.ru
   - –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É A-–∑–∞–ø–∏—Å—å —Å IP `77.222.58.178`
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-30 –º–∏–Ω—É—Ç

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ nginx –æ—Ç–¥–∞–µ—Ç —Ñ–∞–π–ª—ã certbot:**
   ```bash
   # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
   docker-compose -f docker-compose.prod.yml exec certbot sh -c "echo 'test' > /var/www/certbot/.well-known/acme-challenge/test.txt"
   
   # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ nginx
   curl http://yumivo.ru/.well-known/acme-challenge/test.txt
   # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: test
   ```

---

## –®–∞–≥ 10: –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–í SSH —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
cd /opt/anigo

# –ü–æ–ª—É—á–∞–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ email –∏ –¥–æ–º–µ–Ω!)
docker-compose -f docker-compose.portainer.yml run --rm certbot certonly \
  --webroot \
  --webroot-path=/var/www/certbot \
  --email –≤–∞—à-email@example.com \
  --agree-tos \
  --no-eff-email \
  --non-interactive \
  --preferred-challenges http \
  -d –≤–∞—à–¥–æ–º–µ–Ω.ru \
  -d www.–≤–∞—à–¥–æ–º–µ–Ω.ru
```

**–ó–∞–º–µ–Ω–∏—Ç–µ:**
- `–≤–∞—à-email@example.com` –Ω–∞ –≤–∞—à email
- `–≤–∞—à–¥–æ–º–µ–Ω.ru` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω

–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –æ—à–∏–±–∫–∞ - –ø–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ 10 –º–∏–Ω—É—Ç (DNS –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å—Å—è) –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É.

---

## –®–∞–≥ 10: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx

–í Portainer:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Containers**
2. –ù–∞–π–¥–∏—Ç–µ `anigo-nginx-prod`
3. –ù–∞–∂–º–∏—Ç–µ **Restart**

–ò–ª–∏ –≤ SSH:

```bash
docker restart anigo-nginx-prod
```

---

## –®–∞–≥ 11: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–í Portainer:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Stacks** ‚Üí `anigo`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã **Running**:
   - ‚úÖ anigo-nginx-prod
   - ‚úÖ anigo-backend-prod
   - ‚úÖ anigo-frontend-prod
   - ‚úÖ anigo-db-prod

3. –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω:
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
   - –ù–∞–∂–º–∏—Ç–µ **Logs**
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏
   - –ß–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ `.env` —Ñ–∞–π–ª–µ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

---

## –®–∞–≥ 12: –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://–≤–∞—à–¥–æ–º–µ–Ω.ru`
2. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∞–π—Ç —Å –∑–µ–ª–µ–Ω—ã–º –∑–∞–º–æ—á–∫–æ–º (SSL)
3. –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTP - –ø–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ 5 –º–∏–Ω—É—Ç –∏ –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–í–∞—à —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É `https://–≤–∞—à–¥–æ–º–µ–Ω.ru`

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ nginx
docker logs anigo-nginx-prod

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
docker logs anigo-backend-prod

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
docker ps
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω:

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ: `nslookup –≤–∞—à–¥–æ–º–µ–Ω.ru`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç: `ufw status`
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ 10-30 –º–∏–Ω—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥ 9

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:

1. –í Portainer: **Containers** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí **Logs**
2. –ß–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ `.env` —Ñ–∞–π–ª–µ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
   - `SECRET_KEY` –∑–∞–ø–æ–ª–Ω–µ–Ω (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
   - `FRONTEND_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
   - `ALLOWED_ORIGINS` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à –¥–æ–º–µ–Ω
   - –í—Å–µ –ø–∞—Ä–æ–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs anigo-db-prod`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   - `POSTGRES_USER`
   - `POSTGRES_PASSWORD`
   - `POSTGRES_DB`

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs anigo-backend-prod
docker logs anigo-nginx-prod

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker restart anigo-backend-prod

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ (—á–µ—Ä–µ–∑ Portainer: Stacks ‚Üí anigo ‚Üí Remove)
cd /opt/anigo
docker-compose -f docker-compose.portainer.yml down

# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ (—á–µ—Ä–µ–∑ Portainer: Stacks ‚Üí anigo ‚Üí Editor ‚Üí Update)
docker-compose -f docker-compose.portainer.yml up -d
```

---

**–í—Å—ë! –°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º –ø–æ –ø–æ—Ä—è–¥–∫—É, –∏ —Å–∞–π—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.**
